{
  "Description": "Neo4j Graph Database",
  "AWSTemplateFormatVersion": "2010-09-09",
  "Mappings": {
    "4.3.6": {
      "ap-northeast-1": {"64": "ami-06aff02312949c238"},
      "ap-northeast-2": {"64": "ami-077a4e930f2893cd7"},
      "ap-south-1": {"64": "ami-07021df107847b1e1"},
      "ap-southeast-1": {"64": "ami-05b29567470e41dc6"},
      "ap-southeast-2": {"64": "ami-040a9b72d618df3b1"},
      "eu-central-1": {"64": "ami-081b935e88fbe6bc8"},
      "eu-west-1": {"64": "ami-0309dadd09e698831"},
      "eu-west-3": {"64": "ami-0bd85f55cb9fc3a3f"},
      "us-east-1": {"64": "ami-07f845b374a3e071b"},
      "us-east-2": {"64": "ami-02ee699da2378a9ea"},
      "us-west-1": {"64": "ami-0166b7496efb24c0b"},
      "us-west-2": {"64": "ami-02a6c168bdb39ce36"}, 
      "eu-south-1": {"64": "ami-03288b92167749d8a"},
      "af-south-1": {"64": "ami-0eccadbfdd5aa51ad"},
      "ca-central-1": {"64": "ami-0342caa0af44a5077"},
      "eu-west-2": {"64": "ami-0d30909f35428f407"},
      "eu-north-1": {"64": "ami-0e0e6962efa754c4f"},
      "sa-east-1": {"64": "ami-0b6a9d9d1c8889ccf"},
      "ap-east-1": {"64": "ami-075a79f40143a0465"},
      "us-gov-east-1": {"64": "ami-0eb44f2114f367b61"},
      "us-gov-west-1": {"64": "ami-0ffcaf6cd87725566"}
    },
    "4.3.2": {
      "ap-northeast-1": {"64": "ami-0830e34954c668050"},
      "ap-northeast-2": {"64": "ami-0e94884f2ab99ed88"},
      "ap-south-1": {"64": "ami-0bbd623dc287552ff"},
      "ap-southeast-1": {"64": "ami-0d9c9acd806f46c06"},
      "ap-southeast-2": {"64": "ami-04bb726bb46fcb3ee"},
      "eu-central-1": {"64": "ami-012851857c4143890"},
      "eu-west-1": {"64": "ami-04073ee4c923a9027"},
      "eu-west-3": {"64": "ami-05624b83cc3b114bd"},
      "us-east-1": {"64": "ami-094a54de2f205fbd4"},
      "us-east-2": {"64": "ami-08c25fffb58eeef7c"},
      "us-west-1": {"64": "ami-0d83e95dd13832827"},
      "us-west-2": {"64": "ami-07a3d801c7bdce427"}, 
      "eu-south-1": {"64": "ami-0167bbbfe716ff7cf"},
      "af-south-1": {"64": "ami-0ae0e115debdf7a53"},
      "ca-central-1": {"64": "ami-0c2de40887340dba2"},
      "eu-west-2": {"64": "ami-0ccb7de86d09ddefa"},
      "eu-north-1": {"64": "ami-0c76bc9a4e6775179"},
      "sa-east-1": {"64": "ami-0be95766106fa5bc5"},
      "ap-east-1": {"64": "ami-0c05ee88f16f02ae6"},
      "us-gov-east-1": {"64": "ami-06ee1884a05be3407"},
      "us-gov-west-1": {"64": "ami-09232360d2b661bc9"}
    }
  },
  "Parameters": {
    "InstanceType": {
      "Description": "EC2 instance type",
      "Type": "String",
      "Default": "r4.large",
      "AllowedValues": [
        "r4.large",
        "r4.xlarge",
        "r4.2xlarge",
        "r4.4xlarge",
        "r4.8xlarge",
        "r4.16xlarge"
      ]
    },
    "ClusterNodes": {
      "Description": "Number of core nodes",
      "Type": "Number",
      "Default": 3,
      "MinValue": 3,
      "MaxValue": 7
    },
    "ReadReplicas": {
      "Description": "Number of read replica nodes",
      "Type": "Number",
      "Default": 0,
      "MinValue": 0,
      "MaxValue": 5
    },
    "KeyName": {
      "Description": "Name of an existing EC2 KeyPair",
      "Type": "AWS::EC2::KeyPair::KeyName"
    },
    "SSHCIDR": {
      "Description": "SSH CIDR",
      "Type": "String",
      "MinLength": 9,
      "MaxLength": 18,
      "AllowedPattern": "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})",
      "ConstraintDescription": "must be a valid CIDR range of the form x.x.x.x/x."
    },
    "Password": {
      "Description": "Password for Neo4j",
      "Type": "String",
      "NoEcho": true,
      "MinLength": 8,
      "MaxLength": 40,
      "AllowedPattern": "^[a-zA-Z0-9\\.-]+$"
    },
    "DiskSize": {
      "Description": "Size in GB of the EBS volume on each node",
      "Type": "Number",
      "Default": 100
    }
  },
